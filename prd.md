# ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ(PRD) â€” 4ì»· ì¼ê¸° ì¹´íˆ° ìƒì„± ì•±

- ë¬¸ì„œ ë²„ì „: 0.2 (ìˆ˜ì •)
- ì‘ì„±ì¼: 2025-10-13
- ë¬¸ì„œ ìƒíƒœ: Draft

## 1. ì œí’ˆ ê°œìš”
- ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ì¼ê¸°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 4ì»· ì¹´íˆ° ì´ë¯¸ì§€ë¥¼ ìë™ ìƒì„±í•˜ëŠ” ì›¹ ì•±.
- ì‚¬ìš©ìëŠ” ì¼ê¸°ë¥¼ ì‘ì„±í•˜ê³  ì €ì¥í•˜ë©´ ìƒì„±ëœ ì¹´íˆ°ì„ ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œë³„ë¡œ ì—´ëŒ/ê´€ë¦¬.

## 2. ëª©í‘œì™€ ë¹„ë²”ìœ„
- ëª©í‘œ
  - ì¼ê¸° ì“°ê¸° ìŠµê´€ í˜•ì„±ì— ë„ì›€ì„ ì£¼ëŠ” ì¦‰ê°ì ì´ê³  ì¦ê±°ìš´ ë³´ìƒ(4ì»· ì¹´íˆ°) ì œê³µ
  - 1ë¶„ ë‚´ ìƒì„± ì™„ë£Œ, ê°„ë‹¨í•œ ì‚¬ìš© íë¦„, ë‚®ì€ ì§„ì… ì¥ë²½
  - ê°œì¸ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ í•œ í”„ë¼ì´ë¹—í•œ ê²½í—˜ ìš°ì„ 
- ë¹„ë²”ìœ„(ì´ˆê¸°)
  - ê³ ê¸‰ ì´ë¯¸ì§€ í¸ì§‘ íˆ´(ë§í’ì„ /ìŠ¤í‹°ì»¤ í¸ì§‘ ë“±)
  - ì›¹ ê¸°ë°˜ ì„œë¹„ìŠ¤

## 3. ì„±ê³µ ì§€í‘œ(KPIs)
- 4ì»· ìƒì„± ì™„ë£Œìœ¨(ìƒì„± ì„±ê³µ/ìš”ì²­ ë¹„ìœ¨) â‰¥ 95%
- í‰ê·  ìƒì„± ì†Œìš”ì‹œê°„ T90 â‰¤ 90ì´ˆ (í”„ë¡¬í”„íŠ¸+ì´ë¯¸ì§€ ì „ì²´)
- í•œ ë‹¬ ìº˜ë¦°ë” ì™„ì£¼ìœ¨

## 4. ëŒ€ìƒ ì‚¬ìš©ì/í˜ë¥´ì†Œë‚˜
- ê°€ë²¼ìš´ ì¼ê¸° ìŠµê´€ì„ ë§Œë“¤ê³  ì‹¶ì€ ì‚¬ìš©ì
- í…ìŠ¤íŠ¸ ê¸°ë¡ì„ ì‹œê°ì ìœ¼ë¡œ ê°„ì§/ê³µìœ í•˜ê³  ì‹¶ì€ ì‚¬ìš©ì(ì‚¬ì  ê³µìœ  ì¤‘ì‹¬)

## 5. ì‚¬ìš©ì ìŠ¤í† ë¦¬(ìš”êµ¬ì‚¬í•­ í˜•íƒœ)
- â€œë‚˜ëŠ” ê³„ì •ì„ ë§Œë“¤ê³  ê°„ë‹¨í•œ í”„ë¡œí•„ì„ ì„¤ì •í•˜ê³  ì‹¶ë‹¤.â€
- â€œë‚˜ëŠ” ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ê³ , 1ë¶„ ë‚´ 4ì»· ì¹´íˆ°ì„ ë°›ê³  ì‹¶ë‹¤.â€
- â€œë§ˆìŒì— ë“¤ì§€ ì•Šìœ¼ë©´ ë™ì¼ ì¼ê¸°ì— ëŒ€í•´ ì¬ìƒì„±(í”„ë¡¬í”„íŠ¸/ì‹œë“œ ë³€ê²½)í•˜ê³  ì‹¶ë‹¤.â€
- â€œë‹¬ë ¥ì—ì„œ ë‚ ì§œë³„ë¡œ ë‚´ê°€ ì‘ì„±í•œ ì¼ê¸°ì™€ ì¹´íˆ°ì„ ë‹¤ì‹œ ë³´ê³  ì‹¶ë‹¤.â€
- â€œì™„ì„±ëœ 4ì»·ì„ ì €ì¥(ë‹¤ìš´ë¡œë“œ)í•˜ê±°ë‚˜ ê°œì¸ì ìœ¼ë¡œ ê³µìœ í•˜ê³  ì‹¶ë‹¤(ì„ íƒ).â€

## 6. í•µì‹¬ ê¸°ëŠ¥(MVP)ê³¼ ìˆ˜ìš© ê¸°ì¤€(AC)
1) ì¸ì¦/í”„ë¡œí•„
   - ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ ë¡œê·¸ì¸/íšŒì›ê°€ì…
   - í”„ë¡œí•„(ë‹‰ë„¤ì„, í”„ë¡œí•„ì‚¬ì§„) í¸ì§‘ ê°€ëŠ¥
   - AC: ì‹ ê·œ ì‚¬ìš©ì 1ë¶„ ì´ë‚´ ì˜¨ë³´ë”© ì™„ë£Œ, ì„¸ì…˜ ìœ ì§€ 7ì¼

2) ì¼ê¸° ì‘ì„±
   - ë‚ ì§œë³„ 1ê°œì˜ ì¼ê¸° ì‘ì„±(í…ìŠ¤íŠ¸ ìµœì†Œ 20ì ê¶Œì¥)
   - AC: ì €ì¥ ì¦‰ì‹œ ë²„ì „ ê´€ë¦¬ ë° ìë™ ì„ì‹œì €ì¥(30ì´ˆ ê°„ê²©, ì„ íƒ)

3) í”„ë¡¬í”„íŠ¸ ìƒì„±(OpenAI GPT í™œìš©)
   - ì¼ê¸° í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•´ 4ì»· ê°ê°ì˜ ì¥ë©´ ì„¤ëª…, ë“±ì¥ì¸ë¬¼, ìŠ¤íƒ€ì¼, ê°ì • í†¤ì„ í¬í•¨í•˜ëŠ” í”„ë¡¬í”„íŠ¸ ìƒì„±
   - ì¼ê´€ëœ ìºë¦­í„°/ìŠ¤íƒ€ì¼ì„ ìœ ì§€í•˜ë„ë¡ ì‹œìŠ¤í…œ ì§€ì¹¨ í¬í•¨
   - AC: í”„ë¡¬í”„íŠ¸ ìƒì„± 3ì´ˆ ë‚´, êµ¬ì¡°ì  JSON/ë§ˆí¬ë‹¤ìš´ ì¶œë ¥

4) ì´ë¯¸ì§€ ìƒì„±(HuggingFace Qwen/Qwen-Image)
   - 4ê°œì˜ ì´ë¯¸ì§€(ì»·) ìƒì„±, ë™ì¼ ìŠ¤íƒ€ì¼Â·ìºë¦­í„° ì¼ê´€ì„± ìœ ì§€ ì‹œë„
   - í•´ìƒë„ ê¸°ë³¸ 512x512, ìµœëŒ€ 768x768(ì„ íƒ)
   - AC: ìš”ì²­ë‹¹ 4ì»· ì „ë¶€ ì„±ê³µ ìƒì„± â‰¥ 95%, ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ â‰¤ 1íšŒ

5) 4ì»· ì¹´íˆ° í•©ì„±/í‘œì‹œ
   - 2x2 ê·¸ë¦¬ë“œ í•©ì„±
   - ì „ì²´ ì»· ë‹¤ìš´ë¡œë“œ
   - AC: í•©ì„± ì´ë¯¸ì§€ì™€ ê°œë³„ ì»· ëª¨ë‘ ë³´ê¸°/ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥

6) ìº˜ë¦°ë”/íˆìŠ¤í† ë¦¬
   - ì›” ë‹¨ìœ„ ìº˜ë¦°ë” UIì—ì„œ ë‚ ì§œë³„ ì¼ê¸°/ì¹´íˆ° ì¸ë„¤ì¼ í‘œì‹œ
   - ê²€ìƒ‰/í•„í„°: í¬í•¨ëœ ë‹¨ì–´
   - AC: ì›” ì „í™˜ 200ms ë‚´, ì¸ë„¤ì¼ ë¡œë”© ì§€ì—° ìµœì†Œí™”(í”„ë¦¬íŒ¨ì¹˜)

7) ì¬ìƒì„±/ê´€ë¦¬
   - ë™ì¼ ì¼ê¸°ì— ëŒ€í•´ í”„ë¡¬í”„íŠ¸ë‚˜ ì‹œë“œ ë³€ê²½ í›„ ì¬ìƒì„±
   - AC: ì´ì „ ë²„ì „ ë³´ê´€, ê°€ì¥ ë§Œì¡±í•œ ë²„ì „ì„ ê¸°ë³¸ í‘œì‹œ

## 7. ê¸°ìˆ  ìŠ¤íƒ(ì´ˆì•ˆ ê·¼ê±°: prd_draft.md)
- ì›¹ ì„œë²„: Django
- ë°ì´í„°ë² ì´ìŠ¤: SQLite
- í”„ë¡¬í”„íŠ¸ ìƒì„±: OpenAI GPT
- ì´ë¯¸ì§€ ìƒì„±: Hugging Face Hub â€” `Qwen/Qwen-Image`,`Anime-style-flux-lora-Large`

## 8. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜(ê°œìš”)
- Django â†” API ì„œë²„(Fast API) â†” DB
- ë™ê¸° ì‘ì—…: í”„ë¡¬í”„íŠ¸ ìƒì„± â†’ ì´ë¯¸ì§€ ìƒì„± (ìƒì„± ëŒ€ê¸° ì‹œê°„ í‘œì‹œ í•„ìš” - í”„ë¡œê·¸ë ˆìŠ¤/ìŠ¤í”¼ë„ˆ) â†’ í•©ì„±(ì‘ì—… í)
- ì™¸ë¶€ ì—°ë™
  - OpenAI API: í…ìŠ¤íŠ¸â†’êµ¬ì¡°í™” í”„ë¡¬í”„íŠ¸
  - HF Inference Endpoint ë˜ëŠ” ë¡œì»¬/ì„œë²„ í˜¸ìŠ¤íŒ…: ì´ë¯¸ì§€ ìƒì„±

## 9. ì£¼ìš” íë¦„(íŒŒì´í”„ë¼ì¸)
1) ì‚¬ìš©ìê°€ ì¼ê¸° ì €ì¥ â†’ ì‘ì—… ìƒì„±(Queued)
2) GPTë¡œ 4ì»· í”„ë¡¬í”„íŠ¸ êµ¬ì¡°í™” ìƒì„±(JSON)
3) ì»·ë³„ë¡œ Qwen-Image í˜¸ì¶œ(ë™ì‹œ/ìˆœì°¨), ê²°ê³¼ ì €ì¥
4) 2x2 í•©ì„± ì´ë¯¸ì§€ ìƒì„± ë° ì €ì¥
5) ìƒíƒœ Succeededë¡œ ì—…ë°ì´íŠ¸ (pop-up)
6) ìº˜ë¦°ë” UIì— ì¸ë„¤ì¼ ë…¸ì¶œ

## 10. ë°ì´í„° ëª¨ë¸(ì´ˆì•ˆ)
- **User** (id, email, password_hash, created_at, last_login)
- **Profile** (id, user_id FK, nickname, avatar_url, timezone)
- **DiaryEntry** (id, user_id FK, date, title?, content, mood?, tags?, created_at, updated_at)
- **Prompt** (id, diary_entry_id FK, body_text, model, params_json, created_at)
- **Cartoon** (id, diary_entry_id FK, status[queued|running|succeeded|failed], seed?, guidance?, grid_url?, fail_reason?, version, created_at, completed_at)
- **CartoonPanel** (id, cartoon_id FK, index(1-4), image_url, caption?)
- **Task** (id, diary_id FK, type[GENERATE|REROLL], status[queued|running|succeeded|failed], progress, worker_logs, error_message?, created_at, finished_at)

### ì¸ë±ìŠ¤ / ì œì•½
- DiaryEntry: (user_id, date) unique  
- Cartoon: diary_entry_id unique (ì¬ìƒì„± ì‹œ version í•„ë“œë¡œ ë‹¤ì¤‘ í—ˆìš©)

## 11. API (ì˜ˆì‹œ, ì„œë²„ ë‚´ë¶€ìš© í¬í•¨) -> (ì¸ì¦: ğŸ”’ = JWT í•„ìš”, ğŸŸ¢ = ê³µê°œ , â˜… = ì¶”í›„ ì‚­ì œ ì—¬ë¶€ìˆìŒ)
   11.1 Auth
      POST /api/auth/signup â€” íšŒì›ê°€ì… (username, email, password)
      POST /api/auth/login â€” ë¡œê·¸ì¸ â†’ { access, refresh, user }
      POST /api/auth/refresh â€” access ì¬ë°œê¸‰ { refresh } â†’ { access }
      POST /api/auth/verify-email/request ğŸŸ¢ â€” ì´ë©”ì¼ ì¸ì¦ ë©”ì¼ ë°œì†¡ { email }
      POST /api/auth/verify-email/confirm ğŸŸ¢ â€” ì¸ì¦ ì™„ë£Œ { token }
      POST /api/auth/password/forgot ğŸŸ¢ â€” ë¹„ë²ˆ ì´ˆê¸°í™” ë©”ì¼ ë°œì†¡ { email }
      POST /api/auth/password/reset ğŸŸ¢ â€” ë¹„ë²ˆ ë³€ê²½ { token, new_password }
   11.2 Bootstrap
      GET /api/bootstrap ğŸ”’ â€” ë©”ì¸ ì´ˆê¸°í™”(ë‚´ì •ë³´ ìš”ì•½, ì•Œë¦¼ì¹´ìš´íŠ¸, í”Œë˜ê·¸, ë°°ë„ˆ í—¤ë“œ, ë§í¬)
   11.3 Profile
      GET /api/profile/me ğŸ”’ â€” ë‚´ í”„ë¡œí•„ ì¡°íšŒ
      PUT /api/profile/me ğŸ”’ â€” ë‚´ í”„ë¡œí•„ ìˆ˜ì • { display_name, avatar_url, preferences }   
   11.4 Diaries (ì¼ê¸°)
      POST /api/diaries ğŸ”’ â€” ì¼ê¸° ì‘ì„± { date, title, content }
      GET /api/diaries ğŸ”’ â€” ì›”ë³„ ëª©ë¡
      ì¿¼ë¦¬: month=YYYY-MM(í•„ìˆ˜), cursor, limit(â‰¤50)
      GET /api/diaries/{id} ğŸ”’ â€” ì¼ê¸° ìƒì„¸
      PUT /api/diaries/{id} ğŸ”’ â€” ì¼ê¸° ìˆ˜ì • { title?, content? }
      DELETE /api/diaries/{id} ğŸ”’ â€” ì¼ê¸° ì‚­ì œ
   11.5 Cartoons (ìƒì„±/ì¬ìƒì„±/ìƒíƒœ)
      POST /api/diaries/{id}/generate ğŸ”’ â€” ìƒì„± íŠ¸ë¦¬ê±°
      ë°”ë””: {style(1,2,3), panels, language } â†’ 202 { task_id, status:"queued" }
      GET /api/cartoons/{diary_id} ğŸ”’ â€” ìƒíƒœ/ê²°ê³¼ ì¡°íšŒ
      ì‘ë‹µ: { status, panels:[{index,image_url,caption}], meta }
      POST /api/cartoons/{diary_id}/reroll ğŸ”’ â€” ì¬ìƒì„±
      ë°”ë””: {â˜…style, variation_seed, keep_layout } â†’ 202 { task_id }
   â˜…11.5 Tasks
      GET /api/tasks/{task_id} ğŸ”’ â€” ì‘ì—… ìƒíƒœ í´ë§  
      ì‘ë‹µ: { id, diary_id, type, status, progress, worker_logs, error_message, created_at, finished_at }

## 12. UX í™”ë©´(í•µì‹¬)
- ì˜¨ë³´ë”©/ë¡œê·¸ì¸, í”„ë¡œí•„ í¸ì§‘
- ì¼ê¸° ì‘ì„± í™”ë©´(í…ìŠ¤íŠ¸)
- ìƒì„± ëŒ€ê¸°/ì§„í–‰ í‘œì‹œ(í ìƒíƒœ, ë‚¨ì€ ì˜ˆìƒ ì‹œê°„)
- ê²°ê³¼ í™”ë©´(4ì»· ê·¸ë¦¬ë“œ, ë‹¤ìš´ë¡œë“œ, ì¬ìƒì„±)
- ìº˜ë¦°ë” í™”ë©´(ë‚ ì§œë³„ ì¸ë„¤ì¼, í•„í„°)

## 13. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­(NFR)
- ì„±ëŠ¥: ìƒì„± ìš”ì²­ë‹¹ T90 â‰¤ 90ì´ˆ, ì›¹ ì‘ë‹µ TTI â‰¤ 2ì´ˆ
- ì•ˆì •ì„±: ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ 1íšŒ, ë¶€ë¶„ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ì•ˆë‚´
- ë³´ì•ˆ/ê°œì¸ì •ë³´: ë¹„ê³µê°œ ê¸°ë³¸, PII ìµœì†Œ ìˆ˜ì§‘, ì¼ê¸° ë°ì´í„° ì ‘ê·¼ í†µì œ/ê¶Œí•œ ê²€ì¦
- ë¹„ìš©: ì™¸ë¶€ API í˜¸ì¶œ ìˆ˜ ì œí•œ, ì¸ë„¤ì¼/ìºì‹œë¡œ ì¬í˜¸ì¶œ ìµœì†Œí™”
- ë¡œê¹…/ê´€ì¸¡: ìƒì„± ì‹œê°„, ì‹¤íŒ¨ìœ¨, ì‚¬ìš©ì í–‰ë™ ì´ë²¤íŠ¸(ìµëª…í™”)

## 14. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘
- ëª¨ë¸ í’ˆì§ˆ/ì¼ê´€ì„±: ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê°•í™”, ì˜ˆì‹œ-ìƒ· ì œê³µ, ì»· ê°„ ì°¸ì¡° í† í° ì„¤ê³„
- ë¹„ìš©/ì†ë„: ë°°ì¹˜/ë™ì‹œì„± ì œì–´, ìºì‹œ, í/ì›Œì»¤ í™•ì¥ì„±
- ì•ˆì „/ì½˜í…ì¸ :ì¬ìƒì„± ê°€ì´ë“œ ì œê³µ